<!DOCTYPE html>
<html>


<head>
  <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="/stylesheets/bootstrap.css" media="screen" />
  <link rel="stylesheet" type="text/css" href="/stylesheets/style.css" media="screen" />
  <script src="/socket.io/socket.io.js"></script>
  <script src="http://code.jquery.com/jquery-1.11.1.js"></script>
  <title> Sheets </title>
</head>
<body onload="isloggedin()">
  <nav class="navbar navbar-inverse">
    <div class="container-fluid">
      <div class="navbar-header">
        <a class="navbar-brand" href="/">Whiteboard</a>
        <a class="navbar-brand" href="#"> Excel Sheets </a>
        <div class="col-md-2">
          <form id="row">
            <button type="submit" class="btn btn-secondary"> New Row</button>
          </form>
        </div>
        <div class="col-md-2">
          <form id="col">
            <button type="submit" class="btn btn-secondary"> New Col</button>
          </form>
        </div>
        <div class="col-md-2">
          <form id="list" action="">
            <button type="submit" class="btn btn-secondary">List</button>
          </form>
        </div>
        <div class="col-md-1">
          <button id="chatBox" class="btn btn-secondary">chat&#x25BC</button>
        </div>
      </div>
      <div class="btn-group">
      </div>
    </div>
  </nav>
  <div class="container-fluid">
    <h1 id="welcome"> Welcome to Sheets </h1>
    <div class="btn-group">
      <div class="col-md-4">
        <form id="load" action="">
          <input id="m" autocomplete="off" /> <button type="submit" class="btn btn-primary"> Load</button>
        </form>
      </div>
      <div class="pull-right">
        <ul class="list-group" id="files_list" style = "list-style: none">
        </ul>
      </div>
    </div>
    <table id="spreadsheet"> </table>
  </div>
  <div id="chat" class="well col-md-2">
    <ul id="messages" class="list-group"></ul>
    <form action="" class="input-group">
      <input id="m2" class="form-control" autocomplete="off" />
      <span class="input-group-btn">
        <button class="btn btn-default">Send</button>
      </span>
    </form>
  </div>
</body>


<script>
  //chat
  // var socket = io();

  socket.on('loadChat', function(storedMsgs){
      for (var message in storedMsgs) {
          printMessage(storedMsgs[message]);
      }
  });
  $("#chatBox").click(function(){
      $("#chat").toggle();
  });
  $('#chat > form').submit(function(){
      socket.emit('chat message', $('#m2').val());
      $('#m2').val('');
      return false;
  });
  socket.on('chat message', function(msg){
      printMessage(msg);
  });

  //printMessage
  var printMessage = function(msg){
      $('#messages').append($('<li class="list-group-item">').text(msg));
      $('#messages').scrollTop($('#messages')[0].scrollHeight);
  };
</script>

<script src="javascripts/excel.js"></script>
<script src="javascripts/login.js"></script>
<script src="javascripts/message.js"></script>


</html>
